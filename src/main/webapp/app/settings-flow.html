<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <!-- <meta name="theme-color" content="#7952b3"> -->

    <link rel="icon" type="image/x-icon" href="favicon.ico"/>
    <!-- <link rel="stylesheet" href="../dist/bootstrap.css"> -->
    <!-- <link rel="stylesheet" href="./dist/font/fontawesome-free.min.css"> -->
    <link rel="stylesheet" href="../dist/bootstrap-icons.css">
    <link rel="stylesheet" href="../dist/icheck-bootstrap.min.css">
    <link rel="stylesheet" href="../dist/ag-theme-alpine.css">
    <link rel="stylesheet" href="../dist/jquery/menu/jquery.contextMenu.css">
    <link rel="stylesheet" href="../dist/daterangepicker.css">
    <link rel="stylesheet" href="../dist/toastr.min.css">
    <link rel="stylesheet" href="../dist/fancytree/skin-win8/ui.fancytree.min.css">
    <link rel="stylesheet" href="../dist/adminlte.css">
    <link rel="stylesheet" href="../dist/toastr.min.css">
    <link rel="stylesheet" href="dashboard.css">

    <script src="../dist/jquery-3.5.1.min.js"></script>
    <script src="../dist/adminlte.min.js"></script>

</head>
<body style="overflow: hidden;">
<div class="row">
    <div class="col-5">
        <div class="card-body card-main hidden" id="tree-harvest-struct" style="width: 100%; height:100%; overflow-x: hidden; overflow-y: scroll;">
            <table id="grid-flow-settings" class="hierachy-tree" style="width: 100%; outline: none;">
              <colgroup><col width="50px"><col width="*"><col width="80px"><col width="80px"><col width="80px"><col width="80px"><col width="80px"><col width="80px"><col width="80px"></colgroup>
              <thead><tr><th>Action</th><th>URL</th><th>Type</th><th>Status</th><th>Size</th><th>URLs</th><th>Success</th><th>Failed</th><th>TotSize</th></tr></thead>
            </table>
        </div>
    </div>

    <div class="col-7">
        <div class="alert alert-warning" role="alert" name="audit" style="display: none;"></div>
        <form>
            <input type="text" name="id" style="display: none;">
<!--            <div class="mb-3">-->
<!--                <div class="input-group-text">-->

<!--                    <input class="form-check-input mt-0" type="checkbox" name="enabled" checked>-->
<!--                    <label for="exampleInputEmail1" class="form-label">Flow Name</label>-->
<!--                </div>-->

<!--                <input type="text" class="form-control" name="name">-->
<!--            </div>-->
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault">
                <label class="form-check-label" for="flexSwitchCheckDefault">Default switch checkbox input</label>
            </div>

            <div class="input-group mb-3">
                <div class="input-group-text">
                    <input class="form-check-input mt-0" type="checkbox" name="enabled" checked>
                </div>
                <span class="input-group-text">Flow Name</span>
                <input type="text" class="form-control" name="name">
            </div>
            <div class="mb-3">
                <label for="exampleInputEmail1" class="form-label">Email address</label>
                <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp">
                <div id="emailHelp" class="form-text">We'll never share your email with anyone else.</div>
            </div>
            <div class="mb-3">
                <label class="form-label">Email address</label>
                <select class="form-control">
                    <option>option 1</option>
                    <option>option 2</option>
                    <option>option 3</option>
                    <option>option 4</option>
                    <option>option 5</option>
                </select>
            </div>
        </form>

        <ul class="list-group" id="template-flow-setting">
            <div class="alert alert-warning" role="alert" name="audit" style="display: none;"></div>

            <li class="list-group-item section-title">Basic Flow Setting Properties</li>
            <li class="list-group-item" id="flow-setting">
                <input type="text" name="id" style="display: none;">
                <div class="input-group mb-3">
                    <div class="input-group-text">
                        <input class="form-check-input mt-0" type="checkbox" name="enabled" checked>
                    </div>
                    <span class="input-group-text">Flow Name</span>
                    <input type="text" class="form-control" name="name">
                </div>

                <div class="input-group mb-3">
                    <span class="input-group-text">Producer</span>
                    <select class="form-control" name="producer"></select>
                </div>
                <div class="input-group mb-3">
                    <span class="input-group-text">Material Flow</span>
                    <select class="form-control" name="materialFlow"></select>
                </div>
                <div class="input-group mb-3">
                    <span class="input-group-text">Root Location</span>
                    <input type="text" class="form-control" placeholder="Root Path" name="rootPath">
                </div>

                <div class="input-group mb-3">
                    <span class="input-group-text">Stream Path</span>
                    <input type="text" class="form-control" placeholder="content/streams" , name="streamLocation">
                </div>
                <div class="input-group mb-3">
                    <span class="input-group-text">Injection Completed File Name</span>
                    <input type="text" class="form-control" placeholder="ready-for-ingestion-FOLDER-COMPLETED" ,
                           name="injectionCompleteFileName">
                </div>

                <div class="input-group mb-3">
                    <span class="input-group-text">Scan Interval</span>
                    <div class="input-group-text">
                        <select class="form-select mt-0" name="delayUnit">
                            <option value="S">Seconds</option>
                            <option value="M">Minutes</option>
                            <option value="H">Hours</option>
                            <option value="D">Days</option>
                        </select>
                    </div>
                    <input type="text" class="form-control" placeholder="1" , name="delays">
                </div>
                <div class="input-group mb-3">
                    <span class="input-group-text">Max Active Days</span>
                    <input type="text" class="form-control" placeholder="14" , name="maxActiveDays">
                </div>
                <div class="input-group mb-3">
                    <span class="input-group-text">Max Storage Days</span>
                    <input type="text" class="form-control" placeholder="365" , name="maxSaveDays">
                </div>

                <div class="input-group mb-3">
                    <span class="input-group-text">Deposit Schedule (Max Threads):</span>
                    <span class="input-group-text">Mon</span>
                    <input type="text" class="form-control" name="mon">
                    <span class="input-group-text">Tue</span>
                    <input type="text" class="form-control" name="tue">
                    <span class="input-group-text">Wed</span>
                    <input type="text" class="form-control" name="wed">
                    <span class="input-group-text">Thu</span>
                    <input type="text" class="form-control" name="thu">
                    <span class="input-group-text">Fri</span>
                    <input type="text" class="form-control" name="fri">
                    <span class="input-group-text">Sat</span>
                    <input type="text" class="form-control" name="sat">
                    <span class="input-group-text">Sun</span>
                    <input type="text" class="form-control" name="sun">
                </div>
            </li>

            <li class="list-group-item section-title">Injection Location</li>
            <li class="list-group-item" id="injection-location">
                <input type="text" name="id" style="display: none;">
                <div class="input-group mb-3">
                    <span class="input-group-text">Root Location</span>
                    <div class="input-group-text">
                        <select class="form-select" name="scanMode">
                            <option value="NFS">NFS</option>
                            <option value="FTP">FTP</option>
                            <!-- <option value="FTP">SFTP</option> -->
                        </select>
                    </div>
                    <input type="text" class="form-control" placeholder="Root Path" name="rootPath">
                </div>

                <div class="input-group mb-3">
                    <span class="input-group-text">FTP Server</span>
                    <input type="text" class="form-control" placeholder="FTP Server" name="ftpServer">
                    <span class="input-group-text">FTP Port</span>
                    <input type="text" class="form-control" placeholder="FTP Port" name="ftpPort">
                    <span class="input-group-text">FTP Username</span>
                    <input type="text" class="form-control" placeholder="Username" name="ftpUsername">
                    <span class="input-group-text">FTP Password</span>
                    <input type="password" class="form-control" placeholder="Password" name="ftpPassword">
                </div>
            </li>

            <li class="list-group-item section-title">Backup Location</li>
            <li class="list-group-item" id="backup-location">
                <input type="text" name="id" style="display: none;">
                <div class="input-group mb-3">
                    <div class="input-group-text">
                        <input class="form-check-input mt-0" type="checkbox" name="enabled" checked>
                    </div>
                    <span class="input-group-text">Root Location</span>
                    <div class="input-group-text">
                        <select class="form-select" name="scanMode">
                            <option value="NFS">NFS</option>
                            <option value="FTP">FTP</option>
                            <!-- <option value="FTP">SFTP</option> -->
                        </select>
                    </div>
                    <input type="text" class="form-control" placeholder="Root Path" name="rootPath">
                </div>

                <div class="input-group mb-3">
                    <span class="input-group-text">FTP Server</span>
                    <input type="text" class="form-control" placeholder="FTP Server" name="ftpServer">
                    <span class="input-group-text">FTP Port</span>
                    <input type="text" class="form-control" placeholder="FTP Port" name="ftpPort">
                    <span class="input-group-text">FTP Username</span>
                    <input type="text" class="form-control" placeholder="Username" name="ftpUsername">
                    <span class="input-group-text">FTP Password</span>
                    <input type="password" class="form-control" placeholder="Password" name="ftpPassword">
                </div>
            </li>
        </ul>
    </div>
</div>
<script src="../dist/fancytree/jquery.fancytree-all-deps.js"></script>
<script src="../dist/fancytree/modules/jquery.fancytree.table.js"></script>
<script src="../dist/fancytree/modules/jquery.fancytree.wide.js"></script>
<script src="../dist/fancytree/modules/jquery.fancytree.logger.js"></script>
<script src="../dist/toastr.min.js"></script>
<script src="dashboard.js"></script>
<script src="setting-flows.js"></script>
<script type="text/javascript">
// const tableFlowSettings=new DashboardTable('grid-flow-settings', defHeadersFlowSettings);
$(function(){
    const gridFlowSettings=new TreeGrid('grid-flow-settings', optionFlowSetting);

    fetchHttp('/dashboard/restful/setting/flow/all/get', null, function(rsp){
        var html=combineProducers(rsp);
        $('#flow-setting select[name="producer"]').html(html);
        
        $('#flow-setting select[name="producer"]').change(function() {
            var selectedId=$(this).val();
            //var selectedId=$('#flow-setting select[name="producer"] option:selected').val();
            var flows=mapMaterialFlows[selectedId];

            console.log(flows);

            $('#flow-setting select[name="materialFlow"]').html(flows);
        });
    });

    var template=$('#template-flow-setting').html();
    $('#ul-flow-setting-read').html(template);
    $('#ul-flow-setting-edit').html(template);

    $('#ul-flow-setting-read input').prop('disabled', true);
    $('#ul-flow-setting-read select').prop('disabled', true);
});
</script>
</body>
</html>